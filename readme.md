# åŒ—ç†å·¥å»¶æ²³è¯¾å ‚è§†é¢‘ä¸‹è½½

æ¬¢è¿StarğŸŒŸï¼æ¬¢è¿æIssue

æœ¬é¡¹ç›®åœ¨ ç½‘å2023â€œåè¡Œä»£ç â€æ¯”èµ› è£è·**ç‰¹ç­‰å¥–**ğŸ‰ æŒ‡è·¯ğŸ‘‰[Github](https://github.com/BITNP/poems-2023/)

## åŠŸèƒ½ä»‹ç»

ä¸‹è½½[å»¶æ²³è¯¾å ‚](https://www.yanhekt.cn/)çš„å½•æ’­è§†é¢‘

- æ”¯æŒä¸‹è½½éé€‰è¯¾ç­çº§çš„è¯¾ç¨‹
- æ”¯æŒå¤šçº¿ç¨‹æ‰¹é‡ä¸‹è½½
- æ”¯æŒä¸‹è½½ç”µè„‘è§†é¢‘æˆ–æ•™å®¤å½•åƒ
- æŒ‰è¯¾ç¨‹ååˆ†ç±»æ–‡ä»¶å¤¹ä¿å­˜

## æ›´æ–°æ—¥å¿—

- 2023-4-10 åŒæ­¥å»¶æ²³è¯¾å ‚æ¥å£æ›´æ”¹
- 2023-4-20 æ›´æ”¹jsæ‰§è¡Œæ–¹å¼ï¼Œæ— éœ€å®‰è£…nodejs
- 2023-11-12 ç­¾åæ•ˆç‡ä¼˜åŒ–ï¼Œä¼˜åŒ–ä¸‹è½½é€Ÿåº¦
   - ç†è®ºå¯ä»¥è·‘æ»¡åƒå…†æœ‰çº¿ç½‘ï¼Œå¯ä»¥æ ¹æ®ç”µè„‘æ€§èƒ½ä¿®æ”¹max_workersæ•°é‡
- **2024-4-2 (ğŸŒŸ)æ›´æ”¹signatureå®ç°æ–¹å¼**
   - æ”¾å¼ƒjsæ‰§è¡Œï¼Œä¸å†ä½¿ç”¨js2pyï¼Œæå‡å…¼å®¹æ€§ [issue#5](https://github.com/GDDG08/YanHeKT_Downloader/issues/5)
   - ç°åœ¨æ—¶é—´signå’Œurlåç¼€ éƒ½æ˜¯pyåŸç”Ÿ
- 2024-4-2 (ğŸŒŸ)æ›´æ”¹äº¤äº’æ–¹å¼ï¼Œæ·»åŠ å®Œæ•´çš„**å‘½ä»¤è¡Œå‚æ•°**
   - æ”¯æŒä¸€æ¬¡ä¸‹è½½å…¨éƒ¨è¯¾æ—¶ï¼Œæ„Ÿè°¢@ZJC-GHåŒå­¦çš„å»ºè®®å’Œpr
   - æ”¯æŒåˆ†åˆ«æˆ–åŒæ—¶ä¸‹è½½VGAå’ŒVideo
   - æ”¯æŒå¢é‡ä¸‹è½½ï¼Œè‡ªåŠ¨è·³è¿‡å·²ä¸‹è½½æ–‡ä»¶
   - æ›´æ”¹ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼Œæ”¾åœ¨`temp`ä¸­
   - å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶å¤¹ä½ç½®
   - **è¯¦è§ #é£Ÿç”¨æ–¹æ³•**
   - ä¼˜åŒ–ffmpegè¾“å‡º
- 2024-4-3 (ğŸŒŸğŸŒŸ)æ·»åŠ äº†GUIäº¤äº’ç•Œé¢
   - åŸºäºPySimpleGUI4ï¼Œå¯ä»¥è·¨å¹³å°è¿è¡Œ

## ä½¿ç”¨å‰å‡†å¤‡

### æ–¹æ³•ã€‡ï¼šWindowså‘è¡Œï¼ˆæ¨èï¼‰

- ä¸‹è½½ [Releases](https://github.com/GDDG08/YanHeKT_Downloader/releases/latest)ä¸­çš„exeæ–‡ä»¶
  - å»ºè®®ä¸‹è½½å¸¦æœ‰ffmpegç‰ˆæœ¬ï¼Œå¦‚`yanhekt-x.x.x-gui-ffmpeg.exe`
- ç›´æ¥è¿è¡Œï¼Œç•¥è¿‡åè¾¹çš„éƒ¨åˆ†

### æ–¹æ³•ä¸€ï¼šç°å·²é€šè¿‡Pypiå‘å¸ƒ

https://pypi.org/project/yanhekt/

- å®‰è£…`yanhekt`

    ```shell
    pip install yanhekt
    ```

- **ç¡®ä¿å‘½ä»¤è¡Œç¯å¢ƒæœ‰ffmpeg**
  - ç›¸å…³å®‰è£…è¯·è‡ªè¡Œæœç´¢
    - Windowsä¸‹è½½åï¼Œæ·»åŠ ç¯å¢ƒå˜é‡å³å¯
  - å¦‚æœæœ€ç»ˆè§†é¢‘æ²¡æœ‰åˆå¹¶ï¼Œè¯´æ˜ffmpegç¯å¢ƒå­˜åœ¨é—®é¢˜

### æ–¹æ³•äºŒï¼šä½¿ç”¨æºä»£ç 

1. ä¸‹è½½/å…‹éš†æœ¬ä»“åº“æˆ–ä¸‹è½½ [Releases](https://github.com/GDDG08/YanHeKT_Downloader/releases/latest)

2. å®‰è£…pythonä¾èµ–åŒ…

   ```shell
   pip install -r requirements.txt
   # (å…¶å®å°±ä¸€ä¸ªrequests)
   ```

3. **ç¡®ä¿å‘½ä»¤è¡Œç¯å¢ƒï¼ˆæˆ–è€…ä»£ç æ–‡ä»¶å¤¹å†…ï¼‰æœ‰ffmpeg**

   - æœ¬ä»“åº“çš„releaseé™„å¸¦äº†ffmpeg(ä»…exe)
   - ç›¸å…³å®‰è£…è¯·è‡ªè¡Œæœç´¢
     - Windowsç®€å•çš„æ–¹æ³•ï¼šä¸‹è½½åæ‹·è´åˆ°ä»£ç æ–‡ä»¶å¤¹å†…

   - å¦‚æœæœ€ç»ˆè§†é¢‘æ²¡æœ‰åˆå¹¶ï¼Œè¯´æ˜ffmpegç¯å¢ƒå­˜åœ¨é—®é¢˜

## é£Ÿç”¨æ–¹æ³•ï¼ˆGUIï¼‰

1. å¼€å¯æ–¹æ³•

   0. è‹¥release exeï¼Œç›´æ¥æ‰“å¼€

   1. è‹¥ä½¿ç”¨pipå®‰è£…

      ```shell
      yanhekt-gui
      yanhekt gui
      ```

   2. è‹¥æºç è¿è¡Œ

      ```shell
      python main.py gui
      ```

2. å¼€ç®±å³é£Ÿ

   <img src="assets/image-20240403163924034.png" width="250px"/>

   - æ‰”è¿›é“¾æ¥æˆ–è€…courseIDï¼ˆå¯Ctrl-C Vï¼‰
   - è·å–è¯¾ç¨‹ä¿¡æ¯
   - éšæ„é€‰æ‹©è¯¾æ—¶ï¼ˆCtrlã€Shiftã€é¼ æ ‡æ‹–æ‹½éƒ½å¯å¤šé€‰ï¼‰
   - è®¾ç½®ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚è¦ä¸‹è½½ä»€ä¹ˆè§†é¢‘
   - å¼€ä¸‹ï¼


## é£Ÿç”¨æ–¹æ³•ï¼ˆå‘½ä»¤è¡Œï¼‰

***æ³¨æ„ï¼šå¦‚æœä½¿ç”¨[æœ¬åœ°æºä»£ç ](#æ–¹æ³•äºŒï¼šä½¿ç”¨æºä»£ç )å®‰è£…ï¼Œè¯·å°†æœ¬èŠ‚ä¸­çš„`yanhekt`æˆ–`yanhekt-cli`æ›¿æ¢ä¸º`python main.py`***

1. è·å–è¯¾ç¨‹ID

   åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼Œ**æ³¨æ„ä¸æ˜¯è§†é¢‘æ’­æ”¾é¡µ**ï¼Œå¦‚`https://www.yanhekt.cn/course/11111`ï¼Œ

   ä»urlä¸­è·å¾—è¯¾ç¨‹idï¼Œå¦‚`11111`

2. å‘½ä»¤è¡Œå‚æ•°

   - **æŒ‡å®šè¯¾ç¨‹çš„ID**

     - `<courseID>`ï¼Œç›´æ¥ç»™å‡º

       ```shell
       # ä¾‹ï¼šæŸ¥çœ‹è¯¾ç¨‹ä¿¡æ¯åŠè§†é¢‘åˆ—è¡¨
       yanhekt 11111
       ```

   - **é€‰æ‹©ä¸‹è½½çš„è¯¾æ—¶åºå·**

     - `--all`ï¼Œä¸‹è½½å…¨éƒ¨è¯¾æ—¶
     - `--list 0 2 4 `ï¼Œä¸‹è½½é€‰å®šçš„è¯¾æ—¶åˆ—è¡¨
     - `--range 3 5`ï¼Œä¸‹è½½ä¸€ä¸ªèŒƒå›´å†…çš„è¯¾æ—¶
       ```shell
       # ä¾‹ï¼šä¸‹è½½ç¬¬3-8èŠ‚è¯¾
       yanhekt 11111 --range 3 9
       yanhekt 11111 -L 3 9
       ```

   - **é€‰æ‹©ä¸‹è½½çš„è§†é¢‘ç±»å‹**

     - `--dual`ï¼ŒåŒæ—¶ä¸‹è½½ç”µè„‘å½•å±å’Œæ•™å®¤è§†é¢‘**ï¼ˆé»˜è®¤ï¼‰**
     - `--vga `ï¼Œä»…ä¸‹è½½ç”µè„‘å½•å±
     - `--video`ï¼Œä»…ä¸‹è½½æ•™å®¤è§†é¢‘
       ```shell
       # ä¾‹ï¼šä¸‹è½½ç¬¬3-8èŠ‚è¯¾ï¼Œä»…ä¸‹è½½ç”µè„‘å½•å±
       yanhekt 11111 --range 3 9 --vga
       ```

   - å¢é‡ä¸‹è½½

     - `--skip`ï¼Œè·³è¿‡å·²ä¸‹è½½ï¼Œä»…ä¸‹è½½æ–°ä¸Šä¼ çš„è§†é¢‘
       ```shell
       # ä¾‹ï¼šå®šæœŸæ›´æ–°è¯¾ç¨‹å…¨éƒ¨è§†é¢‘
       yanhekt 11111 --all --skip
       ```

3. æ›´å¤šé«˜çº§ç”¨æ³•è¯·å‚è€ƒå‘½ä»¤è¡Œæç¤º

   ```shell
   !yanhekt --help
   
   # usage: main.py [-h] [-A | -L i [i ...] | -R i i] [-D | -G | -V] [-S] [--dir DIR] [--max-workers num] courseID
   
   # GDDG08/YanHeKT_Downloader
   
   # positional arguments:
   # courseID              Course ID of YanHeKT
   
   # options:
   # -h, --help            show this help message and exit
   
   # Lesson Selection:
   # IF NONE, PRINT LESSON LIST AND EXIT.
   
   # -A, --all             Download all lessons
   # -L i [i ...], --list i [i ...]
   #                         Select of lesson index (e.g., --list 1 2 4)
   # -R i i, --range i i   Select range of lessons (e.g., --range 3 5 for [3,5))
   
   # Video Type:
   # -D, --dual            Download both VGA(PC) and Video (default)
   # -G, --vga             Download VGA(PC) only
   # -V, --video           Download Video only
   
   # Configurations:
   # -S, --skip            Skip existing files
   # --dir DIR             Output directory (e.g., --dir ./output)
   # --max-workers num     Max workers for downloading (default: 32)
   
   ```

4. **ENJOY !**



## ä½œä¸ºpythonåŒ…ä½¿ç”¨

ä»å¤„äºåˆæœŸå¼€å‘é˜¶æ®µï¼Œæ¬¢è¿æåŠŸèƒ½éœ€æ±‚å’ŒPR

```python
from yanhekt import YanHeKT

yanhekt = YanHeKT(25555, _all=True, _dual=True, _skip=True, _dir='./')
yanhekt.download()
```



## Todoï¼ˆç”»å¤§é¥¼ï¼‰

- ~~@ZJC-GH åŒå­¦æ·»åŠ äº†æ‰¹é‡ä¸‹è½½åŠŸèƒ½~~
   - ~~æœ‰éœ€è¦çš„åŒå­¦å¯ä»¥åˆ°[è¿™ä¸ªä»“åº“](https://github.com/ZJC-GH/YanHeKT_Downloader) releaseä¸­ä¸‹è½½ä½¿ç”¨~~
   - ~~ç›®å‰å·²åˆå¹¶åˆ°devåˆ†æ”¯~~
- ~~è®¡åˆ’ä½¿ç”¨`argparse`å®Œå–„å‘½ä»¤è¡Œå‚æ•°ï¼Œä¼˜åŒ–ä¸‹äº¤äº’ä½“éªŒ~~(2.2.0å·²å®ç°)
- ~~ï¼ˆè¶…å¤§é¥¼ï¼‰åœ¨å‚æ•°å†™å®Œåæ•´ä¸ªç®€å•çš„gui~~


## è‡´è°¢

- [M3u8Download](https://github.com/anwenzen/M3u8Download)
